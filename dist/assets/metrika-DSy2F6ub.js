(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function u(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(e){if(e.ep)return;e.ep=!0;const n=u(e);fetch(e.href,n)}})();const R=document.querySelector(".header__menu"),L=document.querySelector(".main__menu"),U=document.querySelector(".menu__close"),S=document.querySelectorAll(".popup"),q=document.querySelectorAll(".closeAllModal"),O=document.querySelectorAll(".cosulationOpenModal"),A=document.querySelector(".popup-consultation");function B(){L.style.display="block"}function F(){L.style.display="none"}document.body.addEventListener("keydown",function(t){t.key=="Escape"&&I()});function I(){S.forEach(t=>t.style.display="none"),document.body.style.overflow=""}q.forEach(t=>t.addEventListener("click",function(o){I()}));document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("consultFormMain");M(t)});function N(t,o,u){A.style.display="block";const c=document.querySelector(".modal-title"),e=document.getElementById("titleHiddenMail"),n=document.getElementById("titleHiddenMail2"),l=document.querySelector(".btn-mark");e.value=u,n&&(n.value=u),c.textContent=`${t}`,l.textContent=o;const r=document.getElementById("consultForm");M(r)}O.forEach(t=>t.addEventListener("click",function(o){const u=o.target.dataset.title,c=o.target.dataset.sub,e=o.target.dataset.btn;N(u,e,c)}));R.addEventListener("click",B);U.addEventListener("click",F);function i(t){t=t.replace(/[$$$$]/g,"\\$&");let u=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(window.location.href);return u?u[2]?decodeURIComponent(u[2].replace(/\+/g," ")):"":null}let s=i("utm_source"),p=i("utm_medium"),_=i("utm_campaign"),f=i("utm_term"),g=i("utm_content"),y=i("utm_campaign_name"),h=i("utm_placement"),v=i("utm_device"),b=i("utm_region_name"),k=i("utm_position"),C=i("utm_position_type"),x=i("utm_source_type"),E=i("yclid");s!==null&&s!==""&&(document.cookie=`utm_source=${encodeURIComponent(s)}; path=/; max-age=2592000`);p!==null&&p!==""&&(document.cookie=`utm_medium=${encodeURIComponent(p)}; path=/; max-age=2592000`);_!==null&&_!==""&&(document.cookie=`utm_campaign=${encodeURIComponent(_)}; path=/; max-age=2592000`);f!==null&&f!==""&&(document.cookie=`utm_term=${encodeURIComponent(f)}; path=/; max-age=2592000`);g!==null&&g!==""&&(document.cookie=`utm_content=${encodeURIComponent(g)}; path=/; max-age=2592000`);y!==null&&y!==""&&(document.cookie=`utm_campaign_name=${encodeURIComponent(y)}; path=/; max-age=2592000`);h!==null&&h!==""&&(document.cookie=`utm_placement=${encodeURIComponent(h)}; path=/; max-age=2592000`);v!==null&&v!==""&&(document.cookie=`utm_device=${encodeURIComponent(v)}; path=/; max-age=2592000`);b!==null&&b!==""&&(document.cookie=`utm_region_name=${encodeURIComponent(b)}; path=/; max-age=2592000`);k!==null&&k!==""&&(document.cookie=`utm_position=${encodeURIComponent(k)}; path=/; max-age=2592000`);C!==null&&C!==""&&(document.cookie=`utm_position_type=${encodeURIComponent(C)}; path=/; max-age=2592000`);x!==null&&x!==""&&(document.cookie=`utm_source_type=${encodeURIComponent(x)}; path=/; max-age=2592000`);E!==null&&E!==""&&(document.cookie=`yclid=${encodeURIComponent(E)}; path=/; max-age=2592000`);function a(t){let o=t+"=",c=decodeURIComponent(document.cookie).split(";");for(let e=0;e<c.length;e++){let n=c[e];for(;n.charAt(0)==" ";)n=n.substring(1);if(n.indexOf(o)==0)return n.substring(o.length,n.length)}return""}function P(t){t.append("utm_source",a("utm_source")||""),t.append("utm_medium",a("utm_medium")||""),t.append("utm_campaign",a("utm_campaign")||""),t.append("utm_campaign_name",a("utm_campaign_name")||""),t.append("utm_content",a("utm_content")||""),t.append("utm_term",a("utm_term")||""),t.append("utm_placement",a("utm_placement")||""),t.append("utm_device",a("utm_device")||""),t.append("utm_region_name",a("utm_region_name")||""),t.append("utm_position",a("utm_position")||""),t.append("utm_position_type",a("utm_position_type")||""),t.append("utm_source_type",a("utm_source_type")||""),t.append("yclid",a("yclid")||""),t.append("subject","Заявка с сайта мониторы MK Sound")}function M(t){t.addEventListener("submit",async function(o){o.preventDefault();const u=o.srcElement.querySelector(".red-btn");u.disabled=!0,u.textContent="Отправка...";try{const c=new FormData(t);let e={};P(c),console.log(c.get("title"));const n=await fetch("https://audioholics.ru/sendforms.php",{method:"POST",body:c});if(c.forEach((l,r)=>e[r]=l),localStorage.setItem("name",e.name),!n.ok)throw new Error(`Network response was not ok: ${n.status}`);I(),u.disabled=!1,window.location.href="https://audioics.ru/subwoofer/thanks.html"}catch(c){console.error("Произошла ошибка при отправке формы.",c),alert("Произошла ошибка при отправке формы.",c)}})}document.addEventListener("DOMContentLoaded",function(){let t=!0,o=function(e){let n=e.target,l=n.dataset.phoneClear,r="+7 (___) ___-__-__",d=0,w=r.replace(/\D/g,""),m=e.target.value.replace(/\D/g,"");if(l!=="false"&&e.type==="blur"&&m.length<r.match(/([\_\d])/g).length){e.target.value="";return}w.length>=m.length&&(m=w),e.target.value=r.replace(/./g,function($){return/[_\d]/.test($)&&d<m.length?m.charAt(d++):d>=m.length?"":$}),t&&d==2&&e.target.value=="+7 (8"&&(e.target.value="+7 (",t=!1)};const u=async function(e){e.preventDefault();let n=await navigator.clipboard.readText();if(n[0]=="8"){e.target.value="7"+n.substring(1);return}e.target.value=n};let c=document.querySelectorAll("input[type=tel]");for(let e of c){e.addEventListener("paste",u);for(let n of["input","blur","focus"])e.addEventListener(n,o)}});(function(t,o,u,c,e,n,l){t[e]=t[e]||function(){(t[e].a=t[e].a||[]).push(arguments)},t[e].l=1*new Date;for(var r=0;r<document.scripts.length;r++)if(document.scripts[r].src===c)return;n=o.createElement(u),l=o.getElementsByTagName(u)[0],n.async=1,n.src=c,l.parentNode.insertBefore(n,l)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym");ym(99641825,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0});
